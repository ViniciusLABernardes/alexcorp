<?php header("Access-Control-Allow-Origin: *"); if ($_SERVER['REQUEST_METHOD']==='POST'){ if (isset($_FILES['profilePicture'])){ $file=$_FILES['profilePicture']; if ($file['error']===UPLOAD_ERR_OK){ $fileName=$file['name']; $fileTmpName=$file['tmp_name']; $server="localhost"; $user='root'; $password="Vinileandro0807200323!"; $name='animesite'; $port=3308; $connect=new mysqli($server, $user, $password, $name, $port); if ($connect->connect_error){ die("Connection failed: " . $connect->connect_error);} $uploadPath="./assets/assets/images/uploads/" . $fileName; move_uploaded_file($fileTmpName, $uploadPath); $insertQuery="INSERT INTO cadastro (Imagem) VALUES ('$uploadPath')"; if ($connect->query($insertQuery)===TRUE){ echo "Imagem de perfil salva com sucesso!";} else{ echo "Erro ao salvar a imagem de perfil: " . $connect->error;} $connect->close();} else{ echo "Erro no upload da imagem.";}} else{ echo "O campo 'profilePicture' não foi enviado na requisição.";}} else{ echo "Apenas solicitações POST são permitidas.";}
?>