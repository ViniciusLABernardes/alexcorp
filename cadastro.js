const nicknameForm=document.querySelector(".nicknameform"),nicknameSpecs=document.querySelector(".nicknamespecs"),nicknameSpecs2=document.querySelector(".nicknamespecs2");function checkUsernameAvailability(e){const t=`api/cadastrar.php?username=${encodeURIComponent(e)}`,s=new XMLHttpRequest;s.open("GET",t,!0),s.onreadystatechange=function(){if(4===s.readyState&&200===s.status){const e=s.responseText;showSpecs2="*nome disponivel"===e,updateNicknameSpecsVisibility()}},s.send()}function updateNicknameSpecsVisibility(){showSpecs2?(nicknameSpecs.style.display="none",nicknameSpecs2.style.display="block"):(nicknameSpecs.style.display="block",nicknameSpecs2.style.display="none")}function hideNicknameSpecs(){nicknameSpecs.style.display="none",nicknameSpecs2.style.display="none"}nicknameForm.addEventListener("input",(()=>{const e=nicknameForm.value.trim();""===e||e.length<6||/\s/.test(e)?(showSpecs2=!1,updateNicknameSpecsVisibility()):checkUsernameAvailability(e)})),nicknameForm.addEventListener("focus",(()=>{updateNicknameSpecsVisibility()})),nicknameForm.addEventListener("blur",(()=>{hideNicknameSpecs()}));const passwordForm=document.querySelector(".passwordform"),passwordForm2=document.querySelector(".passwordform2"),passwordSpecs=document.querySelector(".passwordspecs"),passwordCheck=document.querySelector(".passwordCheck"),passwordCheckspecs=document.querySelector(".passwordcheckspecs"),passwordSpecs2=document.querySelector(".passwordspecs2"),showPasswordButton=document.getElementById("showPasswordButton"),showPasswordButton2=document.getElementById("showPasswordButton2");let showPasswordSpecs2=!1;const passwordField=document.getElementById("password");function checkPassword(){const e=document.querySelector(".passwordform").value,t=passwordCheck.value;passwordCheckspecs.style.display=e!==t?"block":"none"}function updatePasswordSpecsVisibility(){showPasswordSpecs2?(passwordSpecs.style.display="none",passwordSpecs2.style.display="block"):(passwordSpecs.style.display="block",passwordSpecs2.style.display="none")}function hidePasswordSpecs(){passwordSpecs.style.display="none",passwordSpecs2.style.display="none"}function showModal(e){const t=document.getElementById("modal");document.getElementById("modal-text").textContent=e,t.style.display="block",window.onclick=function(e){var t=document.getElementById("modal");e.target===t&&(t.style.display="none")};document.getElementById("modal-close").onclick=function(){t.style.display="none"}}function showModal2(e,t,s,o){const n=document.getElementById("modal2"),d=document.getElementById("modal-text2"),a=document.getElementById("video-container2"),c=document.getElementById("link-container2");a.innerHTML="",c.innerHTML="";const i=document.createElement("p");if(i.textContent=e,d.appendChild(i),t){const e=document.createElement("video");e.style.width="80%",e.controls=!0,e.src=t,a.appendChild(e)}if(s&&o){const e=document.createElement("a");e.style.color="#fff",e.textContent=s,e.href=o,c.appendChild(e)}n.style.display="block",window.onclick=function(e){e.target===n&&(n.style.display="none")};document.getElementById("modal-close2").onclick=function(){n.style.display="none"}}showPasswordButton.addEventListener("click",(()=>{"password"===passwordField.type?passwordField.type="text":passwordField.type="password"})),showPasswordButton2.addEventListener("click",(()=>{"password"===passwordForm2.type?passwordForm2.type="text":passwordForm2.type="password"})),passwordForm.addEventListener("focus",(()=>{updatePasswordSpecsVisibility()})),passwordForm.addEventListener("blur",(()=>{hidePasswordSpecs()})),passwordForm.addEventListener("input",(()=>{const e=passwordForm.value.trim();showPasswordSpecs2=!(""===e||e.length<8||!/[A-Z]/.test(e)||!/[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]/.test(e)||!/[0-9]/.test(e)||/\s/.test(e)),updatePasswordSpecsVisibility()})),passwordCheck.addEventListener("input",checkPassword),document.addEventListener("DOMContentLoaded",(function(){function e(e){const t=document.getElementById("modal");document.getElementById("modal-text").textContent=e,t.style.display="block",window.onclick=function(e){var t=document.getElementById("modal");e.target===t&&(t.style.display="none")};document.getElementById("modal-close").onclick=function(){t.style.display="none"}}function t(){document.getElementById("loading-modal").style.display="none"}function s(){var s=document.getElementById("username").value,o=document.getElementById("email").value,n=document.getElementById("password").value,d=document.querySelector(".passwordCheck").value,a=document.querySelector(".checkbox");""!==s&&""!==o&&""!==n&&""!==d?s.length<6?e("Nome de usuário deve ter pelo menos 6 caracteres."):function(e){return/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/.test(e)}(o)?/\s/.test(s)?e("Nome de usuário não pode conter espaços!"):/\s/.test(n)||/\s/.test(d)?e("Senha não pode conter espaços!"):a.checked?(document.getElementById("loading-modal").style.display="block",function(s){const o=`api/cadastrar.php?username=${encodeURIComponent(s)}`,n=new XMLHttpRequest;n.open("GET",o,!0),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){const s=n.responseText;"*nome indisponivel"===s?(e("Nome de usuário já está em uso."),t()):"*nome disponivel"===s?function(){var s=document.getElementById("username").value,o=document.getElementById("email").value,n=document.getElementById("password").value,d="username="+encodeURIComponent(s)+"&email="+encodeURIComponent(o)+"&password="+encodeURIComponent(n),a=new XMLHttpRequest;a.open("POST","api/cadastrar.php",!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status){const t=a.responseText;"Cadastrado com sucesso!"===t?(e("Cadastro realizado com sucesso!"),setTimeout((function(){window.location.href="login.html"}),3300)):e("Email já cadastrado!"===t?"Email já cadastrado!":"Erro ao cadastrar: "+t)}t()}},a.send(d)}():(e("Erro na verificação do nome de usuário."),t())}else t()},n.send()}(s)):e("Aceite os termos de privacidade se deseja prosseguir"):e("O email inserido não é válido."):e("Preencha todos os campos!")}document.getElementById("submit").addEventListener("click",(function(e){e.preventDefault(),s()}))}));