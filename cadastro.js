const nicknameForm=document.querySelector(".nicknameform"),nicknameSpecs=document.querySelector(".nicknamespecs"),nicknameSpecs2=document.querySelector(".nicknamespecs2");function checkUsernameAvailability(e){const s=`api/cadastrar.php?username=${encodeURIComponent(e)}`,t=new XMLHttpRequest;t.open("GET",s,!0),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){const e=t.responseText;showSpecs2="*nome disponivel"===e,updateNicknameSpecsVisibility()}},t.send()}function updateNicknameSpecsVisibility(){showSpecs2?(nicknameSpecs.style.display="none",nicknameSpecs2.style.display="block"):(nicknameSpecs.style.display="block",nicknameSpecs2.style.display="none")}function hideNicknameSpecs(){nicknameSpecs.style.display="none",nicknameSpecs2.style.display="none"}nicknameForm.addEventListener("input",(()=>{const e=nicknameForm.value.trim();""===e||e.length<6||/\s/.test(e)?(showSpecs2=!1,updateNicknameSpecsVisibility()):checkUsernameAvailability(e)})),nicknameForm.addEventListener("focus",(()=>{updateNicknameSpecsVisibility()})),nicknameForm.addEventListener("blur",(()=>{hideNicknameSpecs()}));const passwordForm=document.querySelector(".passwordform"),passwordForm2=document.querySelector(".passwordform2"),passwordSpecs=document.querySelector(".passwordspecs"),passwordCheck=document.querySelector(".passwordCheck"),passwordCheckspecs=document.querySelector(".passwordcheckspecs"),passwordSpecs2=document.querySelector(".passwordspecs2"),showPasswordButton=document.getElementById("showPasswordButton"),showPasswordButton2=document.getElementById("showPasswordButton2");let showPasswordSpecs2=!1;const passwordField=document.getElementById("password");function checkPassword(){const e=document.querySelector(".passwordform").value,s=passwordCheck.value;passwordCheckspecs.style.display=e!==s?"block":"none"}function updatePasswordSpecsVisibility(){showPasswordSpecs2?(passwordSpecs.style.display="none",passwordSpecs2.style.display="block"):(passwordSpecs.style.display="block",passwordSpecs2.style.display="none")}function hidePasswordSpecs(){passwordSpecs.style.display="none",passwordSpecs2.style.display="none"}function showModal(e){const s=document.getElementById("modal");document.getElementById("modal-text").textContent=e,s.style.display="block",window.onclick=function(e){var s=document.getElementById("modal");e.target===s&&(s.style.display="none")};document.getElementById("modal-close").onclick=function(){s.style.display="none"}}showPasswordButton.addEventListener("click",(()=>{"password"===passwordField.type?passwordField.type="text":passwordField.type="password"})),showPasswordButton2.addEventListener("click",(()=>{"password"===passwordForm2.type?passwordForm2.type="text":passwordForm2.type="password"})),passwordForm.addEventListener("focus",(()=>{updatePasswordSpecsVisibility()})),passwordForm.addEventListener("blur",(()=>{hidePasswordSpecs()})),passwordForm.addEventListener("input",(()=>{const e=passwordForm.value.trim();showPasswordSpecs2=!(""===e||e.length<8||!/[A-Z]/.test(e)||!/[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]/.test(e)||!/[0-9]/.test(e)||/\s/.test(e)),updatePasswordSpecsVisibility()})),passwordCheck.addEventListener("input",checkPassword),document.addEventListener("DOMContentLoaded",(function(){function e(e){const s=document.getElementById("modal");document.getElementById("modal-text").textContent=e,s.style.display="block",window.onclick=function(e){var s=document.getElementById("modal");e.target===s&&(s.style.display="none")};document.getElementById("modal-close").onclick=function(){s.style.display="none"}}function s(){document.getElementById("loading-modal").style.display="none"}function t(){var t=document.getElementById("username").value,o=document.getElementById("email").value,n=document.getElementById("password").value,d=document.querySelector(".passwordCheck").value,a=document.querySelector(".checkbox");""!==t&&""!==o&&""!==n&&""!==d?t.length<6?e("Nome de usuário deve ter pelo menos 6 caracteres."):function(e){return/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/.test(e)}(o)?/\s/.test(t)?e("Nome de usuário não pode conter espaços!"):/\s/.test(n)||/\s/.test(d)?e("Senha não pode conter espaços!"):a.checked?(document.getElementById("loading-modal").style.display="block",function(t){const o=`api/cadastrar.php?username=${encodeURIComponent(t)}`,n=new XMLHttpRequest;n.open("GET",o,!0),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){const t=n.responseText;"*nome indisponivel"===t?(e("Nome de usuário já está em uso."),s()):"*nome disponivel"===t?function(){var t=document.getElementById("username").value,o=document.getElementById("email").value,n=document.getElementById("password").value,d="username="+encodeURIComponent(t)+"&email="+encodeURIComponent(o)+"&password="+encodeURIComponent(n),a=new XMLHttpRequest;a.open("POST","api/cadastrar.php",!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status){const s=a.responseText;"Cadastrado com sucesso!"===s?(e("Cadastro realizado com sucesso!"),setTimeout((function(){window.location.href="login.html"}),3300)):e("Email já cadastrado!"===s?"Email já cadastrado!":"Erro ao cadastrar: "+s)}s()}},a.send(d)}():(e("Erro na verificação do nome de usuário."),s())}else s()},n.send()}(t)):e("Aceite os termos de privacidade se deseja prosseguir"):e("O email inserido não é válido."):e("Preencha todos os campos!")}document.getElementById("submit").addEventListener("click",(function(e){e.preventDefault(),t()}))}));