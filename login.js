const showPasswordButton=document.getElementById("showPasswordButton"),passwordForm=document.querySelector(".passwordform"),passwordField=document.getElementById("password");function showLoadingModal(){document.getElementById("loading-modal").style.display="block"}function hideLoadingModal(){document.getElementById("loading-modal").style.display="none"}function showModal(e){const t=document.getElementById("modal");document.getElementById("modal-text").textContent=e,t.style.display="block",window.onclick=function(e){var t=document.getElementById("modal");e.target===t&&(t.style.display="none")};document.getElementById("modal-close").onclick=function(){t.style.display="none"}}showPasswordButton.addEventListener("click",(()=>{"password"===passwordField.type?passwordField.type="text":passwordField.type="password"})),document.addEventListener("DOMContentLoaded",(function(){document.getElementById("login-form").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("email_or_username").value,o=document.getElementById("password").value;showLoadingModal();var n=new XMLHttpRequest;n.open("POST","api/login.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)if("success"===(t=JSON.parse(n.responseText)).status){var e=t.username,t=JSON.parse(n.responseText),o=new Date;o.setFullYear(o.getFullYear()+1),document.cookie="userLoggedIn=true; expires="+o.toUTCString()+"; path=/",document.cookie="username="+e+"; expires="+o.toUTCString()+"; path=/";var d=document.getElementById("topRight"),s=document.getElementById("topRightMobile"),a=document.getElementById("topRightLogedPc"),l=document.getElementById("topRightLogedMobile");d.style.display="none",s.style.display="none",a.style.display="flex",l.style.display="flex";var i=window.innerWidth<=1024;d.style.display="none",s.style.display="none",a.style.display=i?"none":"flex",l.style.display=i?"flex":"none",document.querySelector(".nickname").textContent=e,document.querySelector(".nickname2").textContent=e,document.querySelector(".nickname3").textContent=e,setTimeout((function(){window.location.href="index.html",hideLoadingModal()}),1e3)}else hideLoadingModal(),showModal("Usuario ou senha incorreto(s)!");else hideLoadingModal(),showModal("Erro de conexÃ£o com o servidor. Tente novamente.")};var d="email_or_username="+encodeURIComponent(t)+"&password="+encodeURIComponent(o);n.send(d)}))}));