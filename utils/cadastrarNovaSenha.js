const passwordForm=document.querySelector(".passwordform"),passwordForm2=document.querySelector(".passwordform2"),passwordSpecs=document.querySelector(".passwordspecs"),passwordCheck=document.querySelector(".passwordCheck"),passwordCheckspecs=document.querySelector(".passwordcheckspecs"),passwordSpecs2=document.querySelector(".passwordspecs2"),showPasswordButton=document.getElementById("showPasswordButton"),showPasswordButton2=document.getElementById("showPasswordButton2");let showPasswordSpecs2=!1;const passwordField=document.getElementById("password");function checkPassword(){const e=document.querySelector(".passwordform").value,s=passwordCheck.value;passwordCheckspecs.style.display=e!==s?"block":"none"}function updatePasswordSpecsVisibility(){showPasswordSpecs2?(passwordSpecs.style.display="none",passwordSpecs2.style.display="block"):(passwordSpecs.style.display="block",passwordSpecs2.style.display="none")}function hidePasswordSpecs(){passwordSpecs.style.display="none",passwordSpecs2.style.display="none"}showPasswordButton.addEventListener("click",(()=>{"password"===passwordField.type?passwordField.type="text":passwordField.type="password"})),showPasswordButton2.addEventListener("click",(()=>{"password"===passwordForm2.type?passwordForm2.type="text":passwordForm2.type="password"})),passwordForm.addEventListener("focus",(()=>{updatePasswordSpecsVisibility()})),passwordForm.addEventListener("blur",(()=>{hidePasswordSpecs()})),passwordForm.addEventListener("input",(()=>{const e=passwordForm.value.trim();showPasswordSpecs2=!(""===e||e.length<8||!/[A-Z]/.test(e)||!/[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]/.test(e)||!/[0-9]/.test(e)||/\s/.test(e)),updatePasswordSpecsVisibility()})),passwordCheck.addEventListener("input",checkPassword),document.addEventListener("DOMContentLoaded",(function(){const e=(s="token",new URLSearchParams(window.location.search).get(s));var s;function o(e){const s=document.getElementById("modal");document.getElementById("modal-text").textContent=e,s.style.display="block",window.onclick=function(e){var s=document.getElementById("modal");e.target===s&&(s.style.display="none")};document.getElementById("modal-close").onclick=function(){s.style.display="none"}}function t(){var s=document.getElementById("password").value,t=document.querySelector(".passwordCheck").value;""!==s&&""!==t?/\s/.test(s)||/\s/.test(t)?o("Senha não pode conter espaços!"):(!function(){var s=document.getElementById("password").value,t="token="+encodeURIComponent(e)+"&password="+encodeURIComponent(s),d=new XMLHttpRequest;d.open("POST","../api/atualizar_senha.php",!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.onreadystatechange=function(){if(4===d.readyState){if(200===d.status){const e=d.responseText;"Senha atualizada com sucesso!"===e?(o("Senha atualizada com sucesso!"),setTimeout((function(){window.location.href="../login.html"}),3300)):o("Erro ao alterar senha"+e)}document.getElementById("loading-modal").style.display="none"}},d.send(t)}(),document.getElementById("loading-modal").style.display="block"):o("Preencha todos os campos!")}e||(window.location.href="recSenha.html"),document.getElementById("submit").addEventListener("click",(function(e){e.preventDefault(),t()}))}));